{
    "name": "Mux Video Streaming",
    "description": null,
    "pages": [
      {
        "name": "Mux Video Streaming",
        "description": null,
        "widgets": [
          {
            "title": "",
            "layout": {
              "column": 1,
              "row": 1,
              "width": 3,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.markdown"
            },
            "rawConfiguration": {
              "text": "#  ![Mux logo](https://d10wwqvw6fr90w.cloudfront.net/moodboards/000/651/889/original_d81c3be9eb282ae96000207f6fc2653c244814c2.png)\n\n# Mux Video Streaming Dashboard"
            }
          },
          {
            "title": "Total View Count",
            "layout": {
              "column": 4,
              "row": 1,
              "width": 3,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.billboard"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "nrqlQueries": [
                {
                  "accountIds": [],
                  "query": "SELECT sum(player_view_count) as 'Total views'  FROM Log WHERE source_hostname LIKE 'stream.mux.com' AND cdn IN ({{mux_cdn}}) AND asset_id IN ({{mux_asset}}) AND country IN ({{mux_country}}) AND player_source_domain IN ({{mux_sourcedomain}}) AND page_url IN ({{mux_url}}) COMPARE WITH 1 week ago"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              }
            }
          },
          {
            "title": "Average view seek count",
            "layout": {
              "column": 7,
              "row": 1,
              "width": 2,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.billboard"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "nrqlQueries": [
                {
                  "accountIds": [],
                  "query": "SELECT average(view_seek_count) as 'Seek Count' FROM Log WHERE source_hostname LIKE 'stream.mux.com' AND cdn IN ({{mux_cdn}}) AND asset_id IN ({{mux_asset}}) AND country IN ({{mux_country}}) AND player_source_domain IN ({{mux_sourcedomain}}) AND page_url IN ({{mux_url}})"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              }
            }
          },
          {
            "title": "Session count (uniques)",
            "layout": {
              "column": 9,
              "row": 1,
              "width": 2,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.billboard"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "nrqlQueries": [
                {
                  "accountIds": [],
                  "query": "SELECT uniqueCount(session_id) as 'Sessions' FROM Log WHERE source_hostname LIKE 'stream.mux.com' AND cdn IN ({{mux_cdn}}) AND asset_id IN ({{mux_asset}}) AND country IN ({{mux_country}}) AND player_source_domain IN ({{mux_sourcedomain}}) AND page_url IN ({{mux_url}})"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              }
            }
          },
          {
            "title": "Exits before video start",
            "layout": {
              "column": 11,
              "row": 1,
              "width": 2,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.billboard"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "nrqlQueries": [
                {
                  "accountIds": [],
                  "query": "SELECT percentage(count(*), WHERE exit_before_video_start = 'true') as 'Exit before start' FROM Log WHERE source_hostname LIKE 'stream.mux.com' AND cdn IN ({{mux_cdn}}) AND asset_id IN ({{mux_asset}}) AND country IN ({{mux_country}}) AND player_source_domain IN ({{mux_sourcedomain}}) AND page_url IN ({{mux_url}})"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              }
            }
          },
          {
            "title": "Rebuffering percentage",
            "layout": {
              "column": 1,
              "row": 4,
              "width": 4,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.line"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "legend": {
                "enabled": true
              },
              "nrqlQueries": [
                {
                  "accountIds": [],
                  "query": "SELECT sum(rebuffer_percentage) as 'Rebuffering %' FROM Log WHERE source_hostname LIKE 'stream.mux.com' AND cdn IN ({{mux_cdn}}) AND asset_id IN ({{mux_asset}}) AND country IN ({{mux_country}}) AND player_source_domain IN ({{mux_sourcedomain}}) AND page_url IN ({{mux_url}}) TIMESERIES 5 minutes"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              },
              "yAxisLeft": {
                "zero": true
              }
            }
          },
          {
            "title": "View count",
            "layout": {
              "column": 5,
              "row": 4,
              "width": 4,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.line"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "legend": {
                "enabled": true
              },
              "nrqlQueries": [
                {
                  "accountIds": [],
                  "query": "SELECT sum(player_view_count) FROM Log WHERE source_hostname LIKE 'stream.mux.com' AND cdn IN ({{mux_cdn}}) AND asset_id IN ({{mux_asset}}) AND country IN ({{mux_country}}) AND player_source_domain IN ({{mux_sourcedomain}}) AND page_url IN ({{mux_url}}) TIMESERIES 5 minutes"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              },
              "yAxisLeft": {
                "zero": true
              }
            }
          },
          {
            "title": "Error count (by error)",
            "layout": {
              "column": 9,
              "row": 4,
              "width": 4,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.line"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": false
              },
              "legend": {
                "enabled": true
              },
              "nrqlQueries": [
                {
                  "accountIds": [],
                  "query": "SELECT count(*) FROM Log WHERE source_hostname LIKE 'stream.mux.com' AND player_error_code IS NOT NULL AND player_error_code !='null' AND cdn IN ({{mux_cdn}}) AND asset_id IN ({{mux_asset}}) AND country IN ({{mux_country}}) AND player_source_domain IN ({{mux_sourcedomain}}) AND page_url IN ({{mux_url}}) FACET concat(player_error_code,' : ', player_error_message) TIMESERIES 5 minutes"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              },
              "yAxisLeft": {
                "zero": true
              }
            }
          },
          {
            "title": "Views by Country",
            "layout": {
              "column": 1,
              "row": 7,
              "width": 4,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.pie"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": true
              },
              "legend": {
                "enabled": true
              },
              "nrqlQueries": [
                {
                  "accountIds": [],
                  "query": "SELECT count(*) FROM Log WHERE source_hostname LIKE 'stream.mux.com' AND cdn IN ({{mux_cdn}}) AND asset_id IN ({{mux_asset}}) AND country IN ({{mux_country}}) AND player_source_domain IN ({{mux_sourcedomain}}) AND page_url IN ({{mux_url}}) FACET country_name"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              }
            }
          },
          {
            "title": "Top Views by webpage",
            "layout": {
              "column": 5,
              "row": 7,
              "width": 4,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.pie"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": true
              },
              "legend": {
                "enabled": true
              },
              "nrqlQueries": [
                {
                  "accountIds": [],
                  "query": "SELECT count(*) FROM Log WHERE source_hostname LIKE 'stream.mux.com' AND cdn IN ({{mux_cdn}}) AND asset_id IN ({{mux_asset}}) AND country IN ({{mux_country}}) AND player_source_domain IN ({{mux_sourcedomain}}) AND page_url IN ({{mux_url}}) FACET page_url LIMIT 25"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              }
            }
          },
          {
            "title": "Views by CDN",
            "layout": {
              "column": 9,
              "row": 7,
              "width": 4,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "viz.pie"
            },
            "rawConfiguration": {
              "facet": {
                "showOtherSeries": true
              },
              "legend": {
                "enabled": true
              },
              "nrqlQueries": [
                {
                  "accountIds": [],
                  "query": "SELECT count(*) FROM Log WHERE source_hostname LIKE 'stream.mux.com' AND cdn IN ({{mux_cdn}}) AND asset_id IN ({{mux_asset}}) AND country IN ({{mux_country}}) AND player_source_domain IN ({{mux_sourcedomain}}) AND page_url IN ({{mux_url}}) FACET cdn"
                }
              ],
              "platformOptions": {
                "ignoreTimeRange": false
              }
            }
          },
          {
            "title": "Real Time Logs",
            "layout": {
              "column": 1,
              "row": 10,
              "width": 12,
              "height": 3
            },
            "linkedEntityGuids": null,
            "visualization": {
              "id": "logger.log-table-widget"
            },
            "rawConfiguration": {
              "nrqlQueries": [
                {
                  "accountIds": [],
                  "query": "SELECT * FROM Log WHERE source_hostname LIKE 'stream.mux.com' AND cdn IN ({{mux_cdn}}) AND asset_id IN ({{mux_asset}}) AND country IN ({{mux_country}}) AND player_source_domain IN ({{mux_sourcedomain}}) AND page_url IN ({{mux_url}}) LIMIT 50"
                }
              ]
            }
          }
        ]
      }
    ],
    "variables": [
      {
        "name": "mux_asset",
        "items": null,
        "defaultValues": [],
        "nrqlQuery": {
          "accountIds": [],
          "query": "FROM Log SELECT uniques(asset_id) WHERE source_hostname = 'stream.mux.com' LIMIT 100 SINCE 2 days ago"
        },
        "title": "Asset ID",
        "type": "NRQL",
        "isMultiSelection": true,
        "replacementStrategy": "STRING"
      },
      {
        "name": "mux_country",
        "items": null,
        "defaultValues": [],
        "nrqlQuery": {
          "accountIds": [],
          "query": "FROM Log SELECT uniques(country) WHERE source_hostname = 'stream.mux.com' LIMIT 100 SINCE 2 days ago"
        },
        "title": "Country",
        "type": "NRQL",
        "isMultiSelection": true,
        "replacementStrategy": "STRING"
      },
      {
        "name": "mux_url",
        "items": null,
        "defaultValues": [],
        "nrqlQuery": {
          "accountIds": [],
          "query": "FROM Log SELECT uniques(page_url) WHERE source_hostname = 'stream.mux.com' LIMIT 100 SINCE 2 days ago"
        },
        "title": "URL",
        "type": "NRQL",
        "isMultiSelection": true,
        "replacementStrategy": "STRING"
      },
      {
        "name": "mux_cdn",
        "items": null,
        "defaultValues": [],
        "nrqlQuery": {
          "accountIds": [],
          "query": "FROM Log SELECT uniques(cdn) WHERE source_hostname = 'stream.mux.com' LIMIT 100 SINCE 2 days ago"
        },
        "title": "CDN",
        "type": "NRQL",
        "isMultiSelection": true,
        "replacementStrategy": "STRING"
      },
      {
        "name": "mux_sourcedomain",
        "items": null,
        "defaultValues": [],
        "nrqlQuery": {
          "accountIds": [],
          "query": "FROM Log SELECT uniques(player_source_domain) WHERE source_hostname = 'stream.mux.com' LIMIT 100 SINCE 2 days ago"
        },
        "title": "Player Source Domain",
        "type": "NRQL",
        "isMultiSelection": true,
        "replacementStrategy": "STRING"
      }
    ]
  }